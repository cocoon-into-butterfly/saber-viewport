<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>ViewPort</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
    <script src="http://s1.bdstatic.com/r/www/cache/ecom/esl/1-6-6/esl.js"></script>
    <script>
        require.config({
            packages: [
                {
                    name: 'saber-viewport',
                    location: '../src'
                },
                {
                    name: 'saber-lang',
                    location: './dep/saber-lang/0.1.0/src'
                },
                {
                    name: 'saber-dom',
                    location: './dep/saber-dom/0.1.0/src'
                }
            ]
        });
    </script>
</head>
<body>
    <div id="viewport"></div>
    <script>
        require(['saber-viewport', 'saber-viewport/transition/slider'], function (viewport) {

            function render(url) {
                var html = ['<h1>' + url + '</h1>', '<div>'];
                for (var i = 0; i < 5; i++) {
                    html.push('<a data-link="'+ i +'" href="#">Link ' + i + '</a>&nbsp;');
                }
                html.push('</div>');
                return html.join('');
            }
            
            function load(url) {
                var page = viewport.load(url);
                page.main.innerHTML = render(url);
                page.enter();
            }

            document.getElementById('viewport').onclick = function (e) {
                var target = e.target || e.srcElement;

                if (target.tagName.toLowerCase() == 'a') {
                    load(target.getAttribute('data-link'));
                    return false;
                }
            };

            viewport.init(document.getElementById('viewport'));
            load('0');
        });
    </script>
</body>
</html>
